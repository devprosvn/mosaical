Dưới đây là cách bạn có thể thay thế `tokenURI()` trong `MockGameNFT.sol` để point thẳng đến API NFT của CoinGecko, thay vì về `api.testgame.com` cũ:

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.21;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/utils/Strings.sol";

contract MockGameNFT is ERC721, Ownable {
    using Strings for uint256;

    // CoinGecko asset platform ID cho Ethereum
    string private constant ASSET_PLATFORM = "ethereum";
    // Base URL của CoinGecko NFT API
    string private constant BASE_URI = "https://api.coingecko.com/api/v3/nfts/";

    constructor(string memory name, string memory symbol)
        ERC721(name, symbol)
        Ownable(msg.sender)
    {}

    function mint(address to, uint256 tokenId) external onlyOwner {
        _mint(to, tokenId);
    }

    function exists(uint256 tokenId) external view returns (bool) {
        return _exists(tokenId);
    }

    /// @notice Trả về URI theo chuẩn CoinGecko NFT API
    /// @dev Endpoint: GET /nfts/{asset_platform}/contract/{contract_address}?token_ids[]=tokenId
    function tokenURI(uint256 tokenId) public view override returns (string memory) {
        require(_exists(tokenId), "Token does not exist");

        // Định dạng URL:
        // https://api.coingecko.com/api/v3/nfts/ethereum/contract/0x1234...abcd?token_ids%5B%5D=1
        return string(
            abi.encodePacked(
                BASE_URI,
                ASSET_PLATFORM,
                "/contract/",
                Strings.toHexString(uint160(address(this)), 20),
                "?token_ids%5B%5D=",
                tokenId.toString()
            )
        );
    }
}
```

**Giải thích**:

* **ASSET\_PLATFORM**: Theo CoinGecko docs, với Ethereum bạn dùng `"ethereum"` để gọi NFT API citeturn0search0.
* **BASE\_URI**: `https://api.coingecko.com/api/v3/nfts/`
* **Endpoint**: `/nfts/{asset_platform}/contract/{contract_address}` trả về dữ liệu collection; mình thêm query param `?token_ids[]=tokenId` để chỉ định token cụ thể citeturn0search0turn0search3.
* **Strings.toHexString(uint160(address(this)), 20)** chuyển địa chỉ contract thành chuỗi hex đủ 20 bytes, ví dụ `"0x1234...abcd"`.
* Kết quả `tokenURI(1)` sẽ là:

  ```
  https://api.coingecko.com/api/v3/nfts/ethereum/contract/0xYourContractAddress?token_ids%5B%5D=1
  ```

Giờ mọi metadata của NFT sẽ được kéo trực tiếp từ CoinGecko, không còn dùng `api.testgame.com`. Bạn chỉ cần triển khai lại contract này và redeploy.
